<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
            <title>
                高校作业管理系统
            </title>
            <link href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
                <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js">
                </script>
                <script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js">
                </script>
                <script src="https://cdn.staticfile.org/jquery/3.2.1/jquery.min.js">
                </script>
                <script src="https://cdn.staticfile.org/popper.js/1.12.5/umd/popper.min.js">
                </script>
                <script src="https://cdn.staticfile.org/twitter-bootstrap/4.1.0/js/bootstrap.min.js">
                </script>
                <script src="http://training-static.linesno.com/layer/layer.js"></script>
            </link>
        </meta>
        <style type="text/css">
            h4{padding-top: 50px }
        </style>
    </head>
    <body>
        <div class="container">
            <div class="navbar navbar-fixed-top " height="100px" style="background-color:#337ab7;">
                <ul class="navbar-nav navbar-right list-unstyled" style="margin-right: 5%">
                    <li class="nav-item">
                        <h5>
                            您好！<span th:text="${session.USER_MESSAGE.account}"></span> 
                        </h5>
                    </li>
                    <li class="nav-item">
                       <a href="/logout">
                        <button class="btn btn-default" type="button">
                            注销
                        </button>
                       </a>
                    </li>
                    <li class="nav-item">
                        <button class="btn btn-default" type="button" onclick="changePwd(this)">
                            修改密码
                        </button>
                    </li>
                </ul>
            </div>
            <div class="tab">
			  <ul class="nav  nav-tabs" style="padding-top: 5%;">
			    <li class="nav-item active">
			      <a class="nav-link" href="#">班级管理</a>
			    </li>
			    <li class="nav-item">
			      <a class="nav-link" href="#">教师管理</a>
			    </li>
			    <li class="nav-item">
			      <a class="nav-link" href="#">课程管理</a>
			    </li>
			  </ul>
			  <div id="content">
				<!-- <form role="form">
				  <div class="form-group"> -->
				  	选择学院
				    <select class="form-control">
				        <option>全局</option>
				        <option>软件与信息安全学院</option>
				        <option>外国语学院</option>
				        <option>文学院</option>
				    </select>  
				  <!-- </div>
				</form>  -->
			  	<div class="mod">
            <table id="class_table" class="table table-striped table-hover" >
				<thead>
				<tr>
				  <th id="id">序号</th>
				  <th>班级编号</th>
				  <th>班级名称</th>
				  <!-- <th>班级人数</th> -->
				  <th>操作</th>
				</tr>
				</thead>
				<tbody>
				<tr  th:each="list : ${COURSE_LIST}">
		            <td id="id" scope="row" th:text="${list.id}">1</td>
		            <td id="class_number" th:text="${list.class_number}">Otto</td>
		            <td id="class_name" th:text="${list.class_name}">neo</td>
		            <!-- <td><a class="edit" onclick="editClass(this,${list.id})">edit</a></td> -->
		            <!-- <td><a th:href="@{/toEdit(id=${user.id})}">edit</a></td> -->
		            <!-- <a th:href="@{/deleteClass(id=${list.id})}">delete</a></td> -->
		            <td><button id="edit_class" type="button" class="btn btn-warning" >编辑</button></td>
	                <td><button id="delete_class" type="button" class="btn btn-warning" >删除</button></td>
		        </tr>
				</tbody>
			</table>
			    <button type="button" class="btn btn-warning" data-toggle="modal" data-target="#myModal">新建班级</button>

        </div>
            <div class="mod" style="display: none;"> 
            <table class="table table-striped table-hover">
				<tr>
				  <th>序号</th>
				  <th>教师编号</th>
				  <th>教师姓名</th>
				  <th>所属学院</th>
				  <th>操作</th>
				</tr>
			</table>
			        <button type="button" class="btn btn-warning">新建教师</button>

        </div>
        <div class="mod" style="display: none;">
            <table class="table table-striped table-hover">
				<tr>
				  <th>序号</th>
				  <th>课程编号</th>
				  <th>课程名称</th>
				  <th>操作</th>
				</tr>
			</table>
			        <button type="button" class="btn btn-warning">新建课程</button>
		</div>
        </div>
            </div>
        </div>
        <!-- 模态框（Modal） -->
            <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                  &times;
            </button>
                            <h4 class="modal-title" id="myModalLabel">
                  添加新班级
            </h4>
                        </div>
                        <div class="modal-body">
                           <div class="form-group">
                        <label for="txt_departmentname">班级编号</label>
                        <input type="text" name="class_number_" class="form-control" id="class_number_" placeholder="课程编号">
                    		</div>
                    	<div class="form-group">
                        <label for="txt_departmentname">班级名称</label>
                        <input type="text" name="class_name_" class="form-control" id="class_name_" placeholder="课程名称">
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span>关闭</button>
                    <button type="button" id="btn_submit" class="btn btn-primary" data-dismiss="modal" onclick="addClass()"><span class="glyphicon glyphicon-floppy-disk" aria-hidden="true"></span>保存</button>
                        </div>
                    </div>
                    <!-- /.modal-content -->
                </div>
                <!-- /.modal -->
        </div>
    </body>
    <script type="text/javascript">
    $(function(){    //导航栏跳转
    	
        $(".nav li").click(function(){
//            var $this=$(this);
//            alert($this.index());
            $(this).addClass("active").siblings().removeClass("active");
            $("#content .mod").eq($(".nav li").index(this)).show().siblings("#content .mod").hide();
        });
    
    	$("tr #delete_class").click(function(){
    		var _id = $(this).parents("tr").find("#id").text();
            var _class_number = $(this).parents("tr").find("#class_number").text();
            var _class_name = $(this).parents("tr").find("#class_name").text();
            
            if(confirm('确定要执行此操作吗?')) { 
            	$.post("/deleteClass" , {id:_id},function(response){
           	  		  self.location = "/adminIndex" ;
           	  	  
           	  });  
            }  
            
            //alert(_id+_class_number+_class_name);
            console.log(_id+_class_number+_class_name);
    	});
    
    	$("tr #edit_class").click(function(){
    		var _id = $(this).parents("tr").find("#id").text();
            var _class_number = $(this).parents("tr").find("#class_number").text();
            var _class_name = $(this).parents("tr").find("#class_name").text();
            alert(_id+_class_number+_class_name);
            console.log(_id+_class_number+_class_name);
    	});
        
    });
    
    //思路:弹出框提示用户确认注销 
    function logout(btn){
 
    }
    
    function addClass(){
      var name = document.getElementById("class_name_").value;
      var number = document.getElementById("class_number_").value;
    	
   	  $.post("/addClass" , {class_name:name , class_number:number},function(response){
   		  console.log("response = " + response);
   	  	  if(response.code == 400){
   	  		  alert(response.message);
   	  	  }else if(response.code == 200){
   	    	  alert("添加成功");
   	  		  self.location = "/adminIndex" ;
   	  	  }
   	  });   
    }
    
    function changePwd(btn){
    	layer.open({
			  type: 2,
			  title: false,
			  shade: 0.8, 
			  title: '修改当前用户密码',
			  area: ['50%', '80%'],
			  content: ['/changePassword', 'yes'], //iframe的url，no代表不显示滚动条
			  /* end: function(){ 
			     console.log("close") ; 
				 $("#dataTable").dataTable().fnDraw(false);
			  } */
			});
    }
  
    
</script>
</html>
